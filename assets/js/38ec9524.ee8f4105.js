"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[4138],{59(e,i,n){n.r(i),n.d(i,{assets:()=>c,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"web-operator-api","title":"Web Operator API","description":"This page summarizes the Web control-plane APIs and observability settings.","source":"@site/docs/web-operator-api.md","sourceDirName":".","slug":"/web-operator-api","permalink":"/docs/web-operator-api","draft":false,"unlisted":false,"editUrl":"https://github.com/microclaw/microclaw/tree/main/docs/web-operator-api.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"id":"web-operator-api","title":"Web Operator API","sidebar_position":6},"sidebar":"docs","previous":{"title":"Slash Commands","permalink":"/docs/commands"},"next":{"title":"Skills","permalink":"/docs/skills"}}');var r=n(4848),t=n(8453);const o={id:"web-operator-api",title:"Web Operator API",sidebar_position:6},l=void 0,c={},d=[{value:"Authentication",id:"authentication",level:2},{value:"Session APIs",id:"session-apis",level:2},{value:"Metrics APIs",id:"metrics-apis",level:2},{value:"OTLP Export",id:"otlp-export",level:2},{value:"Config Self-check",id:"config-self-check",level:2}];function a(e){const i={code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.p,{children:"This page summarizes the Web control-plane APIs and observability settings."}),"\n",(0,r.jsx)(i.h2,{id:"authentication",children:"Authentication"}),"\n",(0,r.jsx)(i.p,{children:"MicroClaw Web supports:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:["Session cookie login (",(0,r.jsx)(i.code,{children:"POST /api/auth/login"}),", ",(0,r.jsx)(i.code,{children:"POST /api/auth/logout"}),")"]}),"\n",(0,r.jsxs)(i.li,{children:["Scoped API keys (",(0,r.jsx)(i.code,{children:"/api/auth/api_keys"}),")"]}),"\n",(0,r.jsxs)(i.li,{children:["Legacy bearer token (",(0,r.jsx)(i.code,{children:"web_auth_token"}),") for compatibility"]}),"\n"]}),"\n",(0,r.jsx)(i.p,{children:"Available scopes:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.code,{children:"operator.read"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.code,{children:"operator.write"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.code,{children:"operator.admin"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.code,{children:"operator.approvals"})}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"session-apis",children:"Session APIs"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.code,{children:"GET /api/sessions"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.code,{children:"GET /api/history?session_key=<key>"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.code,{children:"POST /api/reset"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.code,{children:"POST /api/delete_session"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.code,{children:"POST /api/sessions/fork"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.code,{children:"GET /api/sessions/tree"})}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"metrics-apis",children:"Metrics APIs"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.code,{children:"GET /api/metrics"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.code,{children:"GET /api/metrics/summary"})}),"\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.code,{children:"GET /api/metrics/history?minutes=1440&limit=2000"})}),"\n"]}),"\n",(0,r.jsxs)(i.p,{children:["Metrics history is persisted in SQLite and trimmed by ",(0,r.jsx)(i.code,{children:"channels.web.metrics_history_retention_days"}),"."]}),"\n",(0,r.jsx)(i.h2,{id:"otlp-export",children:"OTLP Export"}),"\n",(0,r.jsx)(i.p,{children:"Optional OTLP/HTTP protobuf export:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-yaml",children:'channels:\n  observability:\n    otlp_enabled: true\n    otlp_endpoint: "http://127.0.0.1:4318/v1/metrics"\n    service_name: "microclaw"\n    otlp_export_interval_seconds: 15\n    otlp_queue_capacity: 256\n    otlp_retry_max_attempts: 3\n    otlp_retry_base_ms: 500\n    otlp_retry_max_ms: 8000\n'})}),"\n",(0,r.jsx)(i.p,{children:"Exporter behavior:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"bounded queue with drop-on-full"}),"\n",(0,r.jsx)(i.li,{children:"retry with exponential backoff"}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"config-self-check",children:"Config Self-check"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:(0,r.jsx)(i.code,{children:"GET /api/config/self_check"})}),"\n"]}),"\n",(0,r.jsxs)(i.p,{children:["Returns startup risk warnings and ",(0,r.jsx)(i.code,{children:"risk_level"})," (",(0,r.jsx)(i.code,{children:"none"})," / ",(0,r.jsx)(i.code,{children:"medium"})," / ",(0,r.jsx)(i.code,{children:"high"}),") to quickly spot unsafe settings."]})]})}function p(e={}){const{wrapper:i}={...(0,t.R)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453(e,i,n){n.d(i,{R:()=>o,x:()=>l});var s=n(6540);const r={},t=s.createContext(r);function o(e){const i=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function l(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(t.Provider,{value:i},e.children)}}}]);