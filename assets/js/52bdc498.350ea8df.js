"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[2122],{104(e,n,r){r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"architecture-mcp","title":"Architecture - MCP Integration","description":"MCP extends tool surface area without baking all integrations into MicroClaw itself.","source":"@site/docs/architecture-mcp.md","sourceDirName":".","slug":"/architecture-mcp","permalink":"/docs/architecture-mcp","draft":false,"unlisted":false,"editUrl":"https://github.com/microclaw/microclaw/tree/main/docs/architecture-mcp.md","tags":[],"version":"current","sidebarPosition":12,"frontMatter":{"id":"architecture-mcp","title":"Architecture - MCP Integration","sidebar_position":12},"sidebar":"docs","previous":{"title":"Architecture - Skills System","permalink":"/docs/architecture-skills"},"next":{"title":"Architecture - Channels and Gateway","permalink":"/docs/architecture-channels"}}');var t=r(4848),s=r(8453);const o={id:"architecture-mcp",title:"Architecture - MCP Integration",sidebar_position:12},l=void 0,c={},a=[{value:"Transport model",id:"transport-model",level:2},{value:"Reliability model",id:"reliability-model",level:2},{value:"Tool exposure",id:"tool-exposure",level:2},{value:"Operational guidance",id:"operational-guidance",level:2}];function d(e){const n={code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"MCP extends tool surface area without baking all integrations into MicroClaw itself."}),"\n",(0,t.jsx)(n.h2,{id:"transport-model",children:"Transport model"}),"\n",(0,t.jsx)(n.p,{children:"Supported transports:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"stdio"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"streamable_http"})}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Protocol version is negotiated during initialize (default currently ",(0,t.jsx)(n.code,{children:"2025-11-05"}),", configurable per server/global)."]}),"\n",(0,t.jsx)(n.p,{children:"Config sources are merged from:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"<data_dir>/mcp.json"})}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"<data_dir>/mcp.d/*.json"})," (filename order; later files override earlier definitions for the same server key)"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"reliability-model",children:"Reliability model"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["request timeout (",(0,t.jsx)(n.code,{children:"request_timeout_secs"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:["retry + reconnect for stdio (",(0,t.jsx)(n.code,{children:"max_retries"}),")"]}),"\n",(0,t.jsx)(n.li,{children:"tools cache with TTL + forced refresh"}),"\n",(0,t.jsxs)(n.li,{children:["periodic health probe (",(0,t.jsx)(n.code,{children:"health_interval_secs"}),", ",(0,t.jsx)(n.code,{children:"0"})," disables)"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"tool-exposure",children:"Tool exposure"}),"\n",(0,t.jsx)(n.p,{children:"MCP tools are registered into the same runtime tool registry with namespaced identifiers.\nThis keeps planner behavior consistent between built-in tools and MCP tools."}),"\n",(0,t.jsx)(n.p,{children:"Additionally, MicroClaw can use MCP as a structured-memory backend when a server exposes:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"memory_query"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"memory_upsert"})}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"In that mode, memory operations become MCP-first with automatic fallback to local SQLite on per-call failures."}),"\n",(0,t.jsx)(n.p,{children:"Minimal config sketch:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "mcpServers": {\n    "memory": {\n      "transport": "streamable_http",\n      "endpoint": "http://127.0.0.1:8090/mcp"\n    }\n  }\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["This server is considered memory-capable only when it exposes both ",(0,t.jsx)(n.code,{children:"memory_query"})," and ",(0,t.jsx)(n.code,{children:"memory_upsert"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"operational-guidance",children:"Operational guidance"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Start with minimal local MCP config."}),"\n",(0,t.jsx)(n.li,{children:"Add remote servers one-by-one."}),"\n",(0,t.jsx)(n.li,{children:"Monitor tool list refresh and probe failures in logs."}),"\n",(0,t.jsx)(n.li,{children:"Treat endpoint auth and command dependencies as first-class operational dependencies."}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453(e,n,r){r.d(n,{R:()=>o,x:()=>l});var i=r(6540);const t={},s=i.createContext(t);function o(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);