"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[8446],{212(e,s,i){i.r(s),i.d(s,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>t,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"permissions","title":"Multi-Chat Permissions","description":"MicroClaw uses a chat-scoped authorization model for tool calls.","source":"@site/docs/permissions.md","sourceDirName":".","slug":"/permissions","permalink":"/docs/permissions","draft":false,"unlisted":false,"editUrl":"https://github.com/microclaw/microclaw/tree/main/docs/permissions.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"id":"permissions","title":"Multi-Chat Permissions","sidebar_position":5},"sidebar":"docs","previous":{"title":"Configuration","permalink":"/docs/configuration"},"next":{"title":"Usage Manual","permalink":"/docs/usage"}}');var c=i(4848),o=i(8453);const t={id:"permissions",title:"Multi-Chat Permissions",sidebar_position:5},r=void 0,l={},d=[{value:"Model",id:"model",level:2},{value:"Configure control chats",id:"configure-control-chats",level:2},{value:"Find chat IDs",id:"find-chat-ids",level:2},{value:"Quick verification",id:"quick-verification",level:2},{value:"Notes",id:"notes",level:2}];function a(e){const s={code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s.p,{children:"MicroClaw uses a chat-scoped authorization model for tool calls."}),"\n",(0,c.jsx)(s.h2,{id:"model",children:"Model"}),"\n",(0,c.jsxs)(s.ul,{children:["\n",(0,c.jsxs)(s.li,{children:["Non-control chats can only operate on their own ",(0,c.jsx)(s.code,{children:"chat_id"})]}),"\n",(0,c.jsx)(s.li,{children:"Control chats can operate across chats"}),"\n",(0,c.jsxs)(s.li,{children:["Global memory writes (",(0,c.jsx)(s.code,{children:"write_memory"})," with ",(0,c.jsx)(s.code,{children:'scope: "global"'}),") require control-chat privileges"]}),"\n"]}),"\n",(0,c.jsx)(s.p,{children:"Enforced tools:"}),"\n",(0,c.jsxs)(s.ul,{children:["\n",(0,c.jsx)(s.li,{children:(0,c.jsx)(s.code,{children:"send_message"})}),"\n",(0,c.jsxs)(s.li,{children:["Scheduler tools (",(0,c.jsx)(s.code,{children:"schedule_task"}),", ",(0,c.jsx)(s.code,{children:"list_scheduled_tasks"}),", ",(0,c.jsx)(s.code,{children:"pause_scheduled_task"}),", ",(0,c.jsx)(s.code,{children:"resume_scheduled_task"}),", ",(0,c.jsx)(s.code,{children:"cancel_scheduled_task"}),", ",(0,c.jsx)(s.code,{children:"get_task_history"}),")"]}),"\n",(0,c.jsx)(s.li,{children:(0,c.jsx)(s.code,{children:"export_chat"})}),"\n",(0,c.jsxs)(s.li,{children:[(0,c.jsx)(s.code,{children:"todo_read"})," / ",(0,c.jsx)(s.code,{children:"todo_write"})]}),"\n",(0,c.jsxs)(s.li,{children:["chat-scoped memory operations (",(0,c.jsx)(s.code,{children:"read_memory"}),"/",(0,c.jsx)(s.code,{children:"write_memory"})," with ",(0,c.jsx)(s.code,{children:'scope: "chat"'}),")"]}),"\n"]}),"\n",(0,c.jsx)(s.h2,{id:"configure-control-chats",children:"Configure control chats"}),"\n",(0,c.jsxs)(s.p,{children:["Add ",(0,c.jsx)(s.code,{children:"control_chat_ids"})," to ",(0,c.jsx)(s.code,{children:"microclaw.config.yaml"}),":"]}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{className:"language-yaml",children:"control_chat_ids: [123456789, 987654321]\n"})}),"\n",(0,c.jsx)(s.p,{children:"Then restart:"}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{className:"language-sh",children:"microclaw start\n"})}),"\n",(0,c.jsx)(s.h2,{id:"find-chat-ids",children:"Find chat IDs"}),"\n",(0,c.jsx)(s.p,{children:"If chats already have messages stored, query SQLite:"}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{className:"language-sh",children:'sqlite3 ~/.microclaw/runtime/microclaw.db \\\n  "SELECT chat_id, chat_title, chat_type, last_message_time FROM chats ORDER BY last_message_time DESC;"\n'})}),"\n",(0,c.jsxs)(s.p,{children:["Use the ",(0,c.jsx)(s.code,{children:"chat_id"})," values from this output in ",(0,c.jsx)(s.code,{children:"control_chat_ids"}),"."]}),"\n",(0,c.jsx)(s.h2,{id:"quick-verification",children:"Quick verification"}),"\n",(0,c.jsx)(s.p,{children:"From a non-control chat:"}),"\n",(0,c.jsxs)(s.ol,{children:["\n",(0,c.jsxs)(s.li,{children:["Ask the bot to send a message to a different ",(0,c.jsx)(s.code,{children:"chat_id"})]}),"\n",(0,c.jsx)(s.li,{children:"Expected: permission error"}),"\n"]}),"\n",(0,c.jsx)(s.p,{children:"From a control chat:"}),"\n",(0,c.jsxs)(s.ol,{children:["\n",(0,c.jsx)(s.li,{children:"Repeat the same cross-chat request"}),"\n",(0,c.jsx)(s.li,{children:"Expected: permission layer allows execution (final success depends on target chat reachability/tool behavior)"}),"\n"]}),"\n",(0,c.jsx)(s.h2,{id:"notes",children:"Notes"}),"\n",(0,c.jsxs)(s.ul,{children:["\n",(0,c.jsx)(s.li,{children:"This is authorization at tool execution time, using trusted caller context from runtime."}),"\n",(0,c.jsx)(s.li,{children:"It does not sandbox host command/file access by itself. Keep host deployment locked down."}),"\n",(0,c.jsx)(s.li,{children:"To inspect sandbox posture and execution policy state in Web UI, open Settings and run config self-check (Security posture card)."}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,c.jsx)(s,{...e,children:(0,c.jsx)(a,{...e})}):a(e)}},8453(e,s,i){i.d(s,{R:()=>t,x:()=>r});var n=i(6540);const c={},o=n.createContext(c);function t(e){const s=n.useContext(o);return n.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function r(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:t(e.components),n.createElement(o.Provider,{value:s},e.children)}}}]);