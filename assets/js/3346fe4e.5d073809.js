"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[8857],{8043(e,n,i){i.r(n),i.d(n,{assets:()=>t,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>l,toc:()=>a});const l=JSON.parse('{"id":"channel-setup","title":"Channel Setup","description":"This guide explains how to connect MicroClaw to Telegram, Discord, and WhatsApp Cloud API.","source":"@site/docs/channel-setup.md","sourceDirName":".","slug":"/channel-setup","permalink":"/docs/channel-setup","draft":false,"unlisted":false,"editUrl":"https://github.com/microclaw/microclaw/tree/main/docs/channel-setup.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"id":"channel-setup","title":"Channel Setup","sidebar_position":4},"sidebar":"docs","previous":{"title":"Installation","permalink":"/docs/installation"},"next":{"title":"Configuration","permalink":"/docs/configuration"}}');var s=i(4848),r=i(8453);const o={id:"channel-setup",title:"Channel Setup",sidebar_position:4},c=void 0,t={},a=[{value:"Telegram",id:"telegram",level:2},{value:"1. Create a bot token",id:"1-create-a-bot-token",level:3},{value:"2. Configure MicroClaw",id:"2-configure-microclaw",level:3},{value:"3. Verify",id:"3-verify",level:3},{value:"Discord",id:"discord",level:2},{value:"1. Create a Discord bot",id:"1-create-a-discord-bot",level:3},{value:"2. Configure MicroClaw",id:"2-configure-microclaw-1",level:3},{value:"3. Verify",id:"3-verify-1",level:3},{value:"WhatsApp Cloud API",id:"whatsapp-cloud-api",level:2},{value:"1. Prepare Meta credentials",id:"1-prepare-meta-credentials",level:3},{value:"2. Configure MicroClaw",id:"2-configure-microclaw-2",level:3},{value:"3. Configure Meta Webhook callback",id:"3-configure-meta-webhook-callback",level:3},{value:"4. Verify",id:"4-verify",level:3},{value:"Multi-channel Example",id:"multi-channel-example",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"No channel starts",id:"no-channel-starts",level:3},{value:"Telegram responds in private but not group",id:"telegram-responds-in-private-but-not-group",level:3},{value:"Discord bot is online but silent",id:"discord-bot-is-online-but-silent",level:3},{value:"Discord shows <code>4014 Disallowed intent(s)</code>",id:"discord-shows-4014-disallowed-intents",level:3},{value:"WhatsApp verification fails",id:"whatsapp-verification-fails",level:3}];function d(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"This guide explains how to connect MicroClaw to Telegram, Discord, and WhatsApp Cloud API."}),"\n",(0,s.jsx)(n.p,{children:"MicroClaw can run with any combination of channels. You only need at least one of:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Telegram"}),"\n",(0,s.jsx)(n.li,{children:"Discord"}),"\n",(0,s.jsx)(n.li,{children:"WhatsApp (full webhook credentials)"}),"\n",(0,s.jsxs)(n.li,{children:["Web UI (",(0,s.jsx)(n.code,{children:"web_enabled: true"}),")"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"telegram",children:"Telegram"}),"\n",(0,s.jsx)(n.h3,{id:"1-create-a-bot-token",children:"1. Create a bot token"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Open Telegram and chat with ",(0,s.jsx)(n.code,{children:"@BotFather"})]}),"\n",(0,s.jsxs)(n.li,{children:["Run ",(0,s.jsx)(n.code,{children:"/newbot"})]}),"\n",(0,s.jsxs)(n.li,{children:["Copy the token (",(0,s.jsx)(n.code,{children:"123456:ABC..."}),")"]}),"\n",(0,s.jsxs)(n.li,{children:["Set a username (for example ",(0,s.jsx)(n.code,{children:"my_microclaw_bot"}),")"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"2-configure-microclaw",children:"2. Configure MicroClaw"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'telegram_bot_token: "123456:ABC-DEF1234..."\nbot_username: "my_microclaw_bot"\n'})}),"\n",(0,s.jsx)(n.p,{children:"Notes:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"bot_username"})," is required when Telegram is enabled."]}),"\n",(0,s.jsxs)(n.li,{children:["In group chats, mention ",(0,s.jsx)(n.code,{children:"@bot_username"})," to trigger replies."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"3-verify",children:"3. Verify"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Start MicroClaw: ",(0,s.jsx)(n.code,{children:"microclaw start"})]}),"\n",(0,s.jsxs)(n.li,{children:["Send ",(0,s.jsx)(n.code,{children:"/skills"})," in Telegram"]}),"\n",(0,s.jsx)(n.li,{children:"Confirm the bot replies"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"discord",children:"Discord"}),"\n",(0,s.jsx)(n.h3,{id:"1-create-a-discord-bot",children:"1. Create a Discord bot"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Go to Discord Developer Portal"}),"\n",(0,s.jsx)(n.li,{children:"Create an Application"}),"\n",(0,s.jsx)(n.li,{children:"Create a Bot and copy the bot token"}),"\n",(0,s.jsxs)(n.li,{children:["In OAuth2 URL Generator:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Scopes: ",(0,s.jsx)(n.code,{children:"bot"})]}),"\n",(0,s.jsxs)(n.li,{children:["Bot permissions: ",(0,s.jsx)(n.code,{children:"View Channels"}),", ",(0,s.jsx)(n.code,{children:"Send Messages"}),", ",(0,s.jsx)(n.code,{children:"Read Message History"})," (and others as needed)"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["In ",(0,s.jsx)(n.strong,{children:"Bot -> Privileged Gateway Intents"}),", enable ",(0,s.jsx)(n.strong,{children:"Message Content Intent"})," (recommended)"]}),"\n",(0,s.jsx)(n.li,{children:"Invite the bot to your server"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"2-configure-microclaw-1",children:"2. Configure MicroClaw"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'discord_bot_token: "YOUR_DISCORD_BOT_TOKEN"\n\n# Optional: restrict processing to specific channel IDs\n# discord_allowed_channels:\n#   - 123456789012345678\n#   - 987654321098765432\n'})}),"\n",(0,s.jsx)(n.p,{children:"Notes:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["If ",(0,s.jsx)(n.code,{children:"discord_allowed_channels"})," is empty, MicroClaw listens in all channels it can access."]}),"\n",(0,s.jsx)(n.li,{children:"In guild channels, MicroClaw replies when the bot is mentioned."}),"\n",(0,s.jsxs)(n.li,{children:["If ",(0,s.jsx)(n.code,{children:"Message Content Intent"})," is disabled, Discord may block message content in guilds."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"3-verify-1",children:"3. Verify"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Start MicroClaw: ",(0,s.jsx)(n.code,{children:"microclaw start"})]}),"\n",(0,s.jsxs)(n.li,{children:["Send ",(0,s.jsx)(n.code,{children:"/skills"})," in an allowed Discord channel"]}),"\n",(0,s.jsx)(n.li,{children:"Confirm the bot replies"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"whatsapp-cloud-api",children:"WhatsApp Cloud API"}),"\n",(0,s.jsx)(n.p,{children:"WhatsApp integration runs a webhook server inside MicroClaw."}),"\n",(0,s.jsx)(n.h3,{id:"1-prepare-meta-credentials",children:"1. Prepare Meta credentials"}),"\n",(0,s.jsx)(n.p,{children:"From Meta Developer Dashboard (WhatsApp Cloud API), collect:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"whatsapp_access_token"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"whatsapp_phone_number_id"})}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"whatsapp_verify_token"})," (your chosen verify token)"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"2-configure-microclaw-2",children:"2. Configure MicroClaw"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'whatsapp_access_token: "EAAG..."\nwhatsapp_phone_number_id: "123456789012345"\nwhatsapp_verify_token: "my_verify_token"\nwhatsapp_webhook_port: 8080 # optional, default 8080\n'})}),"\n",(0,s.jsx)(n.h3,{id:"3-configure-meta-webhook-callback",children:"3. Configure Meta Webhook callback"}),"\n",(0,s.jsx)(n.p,{children:"Set webhook URL in Meta to:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"https://<your-public-host>/webhook\n"})}),"\n",(0,s.jsx)(n.p,{children:"MicroClaw exposes:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"GET /webhook"})," for verification"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"POST /webhook"})," for incoming messages"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"4-verify",children:"4. Verify"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Ensure your webhook URL is publicly reachable"}),"\n",(0,s.jsxs)(n.li,{children:["Start MicroClaw: ",(0,s.jsx)(n.code,{children:"microclaw start"})]}),"\n",(0,s.jsx)(n.li,{children:"Complete webhook verification in Meta"}),"\n",(0,s.jsx)(n.li,{children:"Send a WhatsApp message to your business number and confirm reply"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"multi-channel-example",children:"Multi-channel Example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'# LLM\nllm_provider: "anthropic"\napi_key: "sk-ant-..."\nmodel: "claude-sonnet-4-5-20250929"\n\n# Channels (any combination)\ntelegram_bot_token: "123456:ABC..."\nbot_username: "my_microclaw_bot"\ndiscord_bot_token: "..."\nwhatsapp_access_token: "..."\nwhatsapp_phone_number_id: "..."\nwhatsapp_verify_token: "..."\nweb_enabled: true\n'})}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(n.h3,{id:"no-channel-starts",children:"No channel starts"}),"\n",(0,s.jsx)(n.p,{children:"Run:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-sh",children:"microclaw doctor\n"})}),"\n",(0,s.jsx)(n.p,{children:"Then check:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"token fields are non-empty"}),"\n",(0,s.jsx)(n.li,{children:"at least one channel is enabled"}),"\n",(0,s.jsx)(n.li,{children:"for WhatsApp, all three credentials are set"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"telegram-responds-in-private-but-not-group",children:"Telegram responds in private but not group"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Confirm bot is added to the group"}),"\n",(0,s.jsxs)(n.li,{children:["Mention ",(0,s.jsx)(n.code,{children:"@bot_username"})," in group messages"]}),"\n",(0,s.jsxs)(n.li,{children:["Confirm ",(0,s.jsx)(n.code,{children:"bot_username"})," matches BotFather username (without ",(0,s.jsx)(n.code,{children:"@"}),")"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"discord-bot-is-online-but-silent",children:"Discord bot is online but silent"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Check bot has ",(0,s.jsx)(n.code,{children:"View Channels"}),", ",(0,s.jsx)(n.code,{children:"Send Messages"}),", and ",(0,s.jsx)(n.code,{children:"Read Message History"})," permissions"]}),"\n",(0,s.jsxs)(n.li,{children:["In guild channels, mention the bot (for example ",(0,s.jsx)(n.code,{children:"@my_bot hello"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:["If using ",(0,s.jsx)(n.code,{children:"discord_allowed_channels"}),", verify channel IDs are correct"]}),"\n",(0,s.jsxs)(n.li,{children:["Enable ",(0,s.jsx)(n.strong,{children:"Message Content Intent"})," in Discord Developer Portal (",(0,s.jsx)(n.code,{children:"Bot -> Privileged Gateway Intents"}),")"]}),"\n"]}),"\n",(0,s.jsxs)(n.h3,{id:"discord-shows-4014-disallowed-intents",children:["Discord shows ",(0,s.jsx)(n.code,{children:"4014 Disallowed intent(s)"})]}),"\n",(0,s.jsxs)(n.p,{children:["This means Discord rejected one or more requested gateway intents, usually ",(0,s.jsx)(n.code,{children:"MESSAGE_CONTENT"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"What to do:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Open Discord Developer Portal -> your app -> ",(0,s.jsx)(n.code,{children:"Bot"})]}),"\n",(0,s.jsxs)(n.li,{children:["Under ",(0,s.jsx)(n.code,{children:"Privileged Gateway Intents"}),", enable ",(0,s.jsx)(n.code,{children:"Message Content Intent"})]}),"\n",(0,s.jsx)(n.li,{children:"Save changes and restart MicroClaw"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Current MicroClaw behavior:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["MicroClaw first starts with ",(0,s.jsx)(n.code,{children:"MESSAGE_CONTENT"})]}),"\n",(0,s.jsxs)(n.li,{children:["If Discord returns ",(0,s.jsx)(n.code,{children:"4014"}),", MicroClaw automatically falls back to non-privileged intents so the bot can still run"]}),"\n",(0,s.jsxs)(n.li,{children:["Full guild message-content behavior requires ",(0,s.jsx)(n.code,{children:"Message Content Intent"})]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"whatsapp-verification-fails",children:"WhatsApp verification fails"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Confirm verify token in Meta exactly matches ",(0,s.jsx)(n.code,{children:"whatsapp_verify_token"})]}),"\n",(0,s.jsxs)(n.li,{children:["Confirm callback URL ends with ",(0,s.jsx)(n.code,{children:"/webhook"})]}),"\n",(0,s.jsx)(n.li,{children:"Confirm your endpoint is publicly reachable (not localhost only)"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453(e,n,i){i.d(n,{R:()=>o,x:()=>c});var l=i(6540);const s={},r=l.createContext(s);function o(e){const n=l.useContext(r);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),l.createElement(r.Provider,{value:n},e.children)}}}]);